<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shop | Arvind Prajapati</title>
  <meta name="description" content="Shop page with awesome tech products by Arvind Prajapati" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/daisyui"></script>
  <style>
    ::-webkit-scrollbar {
      height: 8px;
    }
    ::-webkit-scrollbar-thumb {
      background: #6366f1;
      border-radius: 4px;
    }
    .add-to-cart-btn {
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .add-to-cart-btn:hover {
      background-color: #4f46e5;
      color: white;
    }
  </style>
</head>
<body class="bg-base-200 text-base-content flex flex-col min-h-screen">

  <!-- Navbar -->
  <nav class="navbar bg-base-100 shadow px-6">
    <div class="flex-1">
      <a href="index.html" class="btn btn-ghost normal-case text-2xl font-bold">Arvind</a>
    </div>
    <ul class="menu menu-horizontal px-1 hidden md:flex space-x-4 text-lg">
      <li><a href="index.html" class="hover:text-primary">Home</a></li>
      <li><a href="about.html" class="hover:text-primary">About</a></li>
      <li><a href="books.html" class="hover:text-primary">Books</a></li>
      <li><a href="contact.html" class="hover:text-primary">Contact</a></li>
      <li><a class="active text-primary font-semibold" href="shop.html">Shop</a></li>
    </ul>
    <div class="flex items-center space-x-4">
      <!-- Dark/Light toggle -->
      <button id="theme-toggle" class="btn btn-square btn-ghost tooltip tooltip-bottom" data-tip="Toggle Dark/Light" aria-label="Toggle theme">
        <svg id="theme-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="5" />
          <line x1="12" y1="1" x2="12" y2="3" />
          <line x1="12" y1="21" x2="12" y2="23" />
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
          <line x1="1" y1="12" x2="3" y2="12" />
          <line x1="21" y1="12" x2="23" y2="12" />
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </svg>
      </button>

      <!-- Cart Button -->
      <button id="cart-btn" class="btn btn-ghost btn-circle tooltip tooltip-bottom" data-tip="Cart" aria-label="Open cart">
        <div class="indicator">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="9" cy="21" r="1" />
            <circle cx="20" cy="21" r="1" />
            <path d="M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6" />
          </svg>
          <span id="cart-count" class="badge badge-sm indicator-item bg-primary text-white" style="display:none">0</span>
        </div>
      </button>
    </div>
  </nav>

  <!-- Shop Heading -->
  <main class="flex-grow p-6 max-w-7xl mx-auto">
    <h1 class="text-5xl font-bold mb-8 text-center">Shop Awesome Tech Gear</h1>

    <!-- Products Grid -->
    <div id="products" class="grid gap-8 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
      <!-- Products inserted by JS -->
    </div>
  </main>

  <!-- Cart Modal -->
  <input type="checkbox" id="cart-modal-toggle" class="modal-toggle" />
  <div class="modal modal-bottom sm:modal-middle" role="dialog" aria-modal="true" aria-labelledby="cart-modal-title" aria-describedby="cart-modal-desc">
    <div class="modal-box relative max-w-3xl">
      <label for="cart-modal-toggle" class="btn btn-sm btn-circle absolute right-2 top-2" aria-label="Close cart modal">✕</label>
      <h3 id="cart-modal-title" class="text-lg font-bold mb-4">Your Cart</h3>
      <div id="cart-items" class="space-y-4 max-h-96 overflow-y-auto" aria-live="polite" aria-relevant="additions removals"></div>
      <div id="cart-empty" class="text-center text-gray-500">Your cart is empty.</div>
      <div id="cart-total-container" class="mt-6 flex justify-between items-center font-bold text-lg hidden" aria-live="polite">
        <span>Total:</span>
        <span id="cart-total">$0.00</span>
      </div>
      <div class="modal-action flex justify-between">
        <button id="clear-cart" class="btn btn-error btn-sm">Clear Cart</button>
        <button id="checkout" class="btn btn-primary btn-sm">Checkout</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer footer-center p-6 bg-base-300 text-base-content mt-12">
    <p>&copy; 2025 Arvind Prajapati. All rights reserved.</p>
  </footer>

  <script>
    // PRODUCTS DATA with clearer, real images from Unsplash
    const products = [
      {
        id: 1,
        name: "Gaming Laptop",
        price: 1200,
        img: "https://images.unsplash.com/photo-1517336714731-489689fd1ca8?auto=format&fit=crop&w=600&q=80",
        desc: "High performance laptop for gaming and development."
      },
      {
        id: 2,
        name: "Wireless Headphones",
        price: 150,
        img: "../assets/headphone.webp",
        desc: "Comfortable, noise-cancelling over-ear headphones."
      },
      {
        id: 3,
        name: "Mechanical Keyboard",
        price: 100,
        img: "https://images.unsplash.com/photo-1545239351-1141bd82e8a6?auto=format&fit=crop&w=600&q=80",
        desc: "RGB backlit, tactile switches for a great typing experience."
      },
      {
        id: 4,
        name: "Smartphone",
        price: 799,
        img: "https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?auto=format&fit=crop&w=600&q=80",
        desc: "Latest model with high-res camera and long battery life."
      },
      {
        id: 5,
        name: "Smartwatch",
        price: 250,
        img: "https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?auto=format&fit=crop&w=600&q=80",
        desc: "Keep track of your fitness and notifications on the go."
      },
      {
        id: 6,
        name: "Camera",
        price: 650,
        img: "https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=600&q=80",
        desc: "Capture every moment with stunning clarity."
      }
    ];

    // Render Products
    const productsContainer = document.getElementById('products');

    function renderProducts() {
      productsContainer.innerHTML = '';
      products.forEach(p => {
        const productCard = document.createElement('div');
        productCard.className = 'card bg-base-100 shadow-lg rounded-lg overflow-hidden flex flex-col hover:shadow-xl transition-shadow duration-300';

        productCard.innerHTML = `
          <img src="${p.img}" alt="${p.name}" class="w-full h-48 object-cover" />
          <div class="card-body flex flex-col flex-grow">
            <h2 class="card-title text-lg font-semibold mb-2">${p.name}</h2>
            <p class="flex-grow text-gray-600 text-sm">${p.desc}</p>
            <div class="mt-4 flex items-center justify-between">
              <span class="font-bold text-primary text-lg">$${p.price}</span>
              <button data-id="${p.id}" class="btn btn-primary btn-sm add-to-cart-btn" aria-label="Add ${p.name} to cart">Add to Cart</button>
            </div>
          </div>
        `;
        productsContainer.appendChild(productCard);
      });
    }

    // CART LOGIC
    let cart = {};

    function saveCart() {
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
    }

    function loadCart() {
      const saved = localStorage.getItem('cart');
      if (saved) {
        cart = JSON.parse(saved);
      }
    }

    function updateCartCount() {
      const countElem = document.getElementById('cart-count');
      const totalCount = Object.values(cart).reduce((sum, item) => sum + item.quantity, 0);
      if (totalCount > 0) {
        countElem.style.display = 'inline-block';
        countElem.textContent = totalCount;
      } else {
        countElem.style.display = 'none';
      }
    }

    function renderCart() {
      const cartItemsContainer = document.getElementById('cart-items');
      const cartEmptyText = document.getElementById('cart-empty');
      const cartTotalElem = document.getElementById('cart-total');
      const cartTotalContainer = document.getElementById('cart-total-container');

      cartItemsContainer.innerHTML = '';
      let total = 0;

      const items = Object.values(cart);
      if (items.length === 0) {
        cartEmptyText.style.display = 'block';
        cartTotalContainer.style.display = 'none';
      } else {
        cartEmptyText.style.display = 'none';
        cartTotalContainer.style.display = 'flex';

        items.forEach(item => {
          const product = products.find(p => p.id === item.id);
          if (!product) return;

          total += product.price * item.quantity;

          const cartItem = document.createElement('div');
          cartItem.className = 'flex items-center space-x-4';

          cartItem.innerHTML = `
            <img src="${product.img}" alt="${product.name}" class="w-16 h-16 object-cover rounded" />
            <div class="flex-grow">
              <h4 class="font-semibold">${product.name}</h4>
              <p class="text-sm text-gray-600">$${product.price} × ${item.quantity} = $${(product.price * item.quantity).toFixed(2)}</p>
              <div class="mt-1 space-x-2">
                <button data-id="${product.id}" class="btn btn-xs btn-outline btn-primary decrease-qty" aria-label="Decrease quantity">−</button>
                <button data-id="${product.id}" class="btn btn-xs btn-outline btn-primary increase-qty" aria-label="Increase quantity">+</button>
                <button data-id="${product.id}" class="btn btn-xs btn-error remove-item" aria-label="Remove item">Remove</button>
              </div>
            </div>
          `;

          cartItemsContainer.appendChild(cartItem);
        });

        cartTotalElem.textContent = `$${total.toFixed(2)}`;
      }
    }

    function addToCart(id) {
      if (cart[id]) {
        cart[id].quantity++;
      } else {
        cart[id] = { id: id, quantity: 1 };
      }
      saveCart();
      renderCart();
    }

    function removeFromCart(id) {
      delete cart[id];
      saveCart();
      renderCart();
    }

    function changeQuantity(id, delta) {
      if (!cart[id]) return;
      cart[id].quantity += delta;
      if (cart[id].quantity < 1) {
        removeFromCart(id);
      } else {
        saveCart();
      }
      renderCart();
    }

    // Event Listeners
    document.body.addEventListener('click', (e) => {
      if (e.target.classList.contains('add-to-cart-btn')) {
        const id = e.target.getAttribute('data-id');
        addToCart(id);
      } else if (e.target.classList.contains('remove-item')) {
        const id = e.target.getAttribute('data-id');
        removeFromCart(id);
      } else if (e.target.classList.contains('increase-qty')) {
        const id = e.target.getAttribute('data-id');
        changeQuantity(id, +1);
      } else if (e.target.classList.contains('decrease-qty')) {
        const id = e.target.getAttribute('data-id');
        changeQuantity(id, -1);
      }
    });

    // Cart button toggles modal
    const cartBtn = document.getElementById('cart-btn');
    const cartModalToggle = document.getElementById('cart-modal-toggle');

    cartBtn.addEventListener('click', () => {
      renderCart();
      cartModalToggle.checked = true;
    });

    // Clear Cart button
    document.getElementById('clear-cart').addEventListener('click', () => {
      cart = {};
      saveCart();
      renderCart();
    });

    // Checkout button (demo)
    document.getElementById('checkout').addEventListener('click', () => {
      if (Object.keys(cart).length === 0) {
        alert('Your cart is empty!');
        return;
      }
      alert('Thank you for your purchase! (This is a demo alert.)');
      cart = {};
      saveCart();
      renderCart();
      cartModalToggle.checked = false;
    });

    // Dark/light theme toggle
    const themeToggleBtn = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');

    function setTheme(theme) {
      if (theme === 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark');
        themeIcon.innerHTML = `
          <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
          <circle cx="12" cy="12" r="9" />
          <path d="M12 3a9 9 0 0 0 0 18 9 9 0 0 1 0-18z" />
        `;
      } else {
        document.documentElement.setAttribute('data-theme', 'light');
        themeIcon.innerHTML = `
          <circle cx="12" cy="12" r="5" />
          <line x1="12" y1="1" x2="12" y2="3" />
          <line x1="12" y1="21" x2="12" y2="23" />
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
          <line x1="1" y1="12" x2="3" y2="12" />
          <line x1="21" y1="12" x2="23" y2="12" />
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        `;
      }
      localStorage.setItem('theme', theme);
    }

    themeToggleBtn.addEventListener('click', () => {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      setTheme(currentTheme === 'dark' ? 'light' : 'dark');
    });

    // On page load
    window.addEventListener('DOMContentLoaded', () => {
      loadCart();
      renderProducts();
      renderCart();
      updateCartCount();
      const savedTheme = localStorage.getItem('theme') || 'light';
      setTheme(savedTheme);
    });
  </script>

</body>
</html>
